1. 게임 규칙

게임은 다수의 파라미터와 규칙으로 이루어진 시스템으로 이러한 게임을 제작하기 위해서는 게임을 구성하고 있는 요소에 대한 모델링 작업이 선행되어야한다. 유전 알고리즘을 이용하여 다양한 종류의 몬스터들을 생성하기 위하여 본 졸업 작품에서는 논문을 기반으로, 롤플레잉 게임의 대표적인 시스템인 던전 탐험을 기반으로 하는 게임으로 설정한다.

본 졸업 작품에서는 실험에 쓰일 던전(제한된 맵)을 구성하기위해 일반적인 상용게임에서 많이 사용하는 던전을 토대로 제한된 하나의 맵으로 단순화하여

구성하였다. 단순화된 게임 생성 및 플레이 규칙은 다음과 같다.

[규칙 1] 던전에는 10마리 임의의 몬스터를 임의의 위치에 생성한다.
[규칙 2] 몬스터는 1마리씩 순차적으로 등장하여 플레이어를 향해 움직인다.
[규칙 3] 플레이어는 자동으로 몬스터와 전투를 치른다.
[규칙 4] 플레어어와 몬스터는 서로 한 번씩 공격을 주고받는다.
[규칙 5] 플레이어가 몬스터를 처치하면 다음 몬스터가 등장한다.
[규칙 6] 마지막 몬스터를 처치하면 던전을 클리어한 것으로 간주한다.

2. 유전자 구성
게임에서 사용되는 파라미터들은 게임의 장르 혹은 게임의 규모에 따라 다르지만 플레이어와 몬스터의 전투가 일어나는 게임에서는 핵심 파라미터를 

축소시킬 수 있다. 본 졸업 작품에서는 논문을 기반으로, (표 1)과 같이 워크래프트3의 유닛데이터를 사용한다. 유닛데이터는 HP, Armor, Damage, Speed와 같은 4개 파라미터로 축소하여 유전자로 사용한다.

(표 1). 몬스터의 파라미터


2.1 HP
게임에서 HP(체력)은 얼마나 더 오랫동안 살 수 있는지를 나타내며 “Life”라고도 한다. 

적의 공격 등으로 신체적인 타격을 받으면 수치가 줄어들며 HP가 0이하가 되면 죽게 된다.


2.2 Armor
방어의 능력을 나타내며 방어율로 변환해서 데미지 흡수에 기여한다. 

외부 요인의 피해를 감소시킬 수 있는 수치로 HP와 함께 몬스터의 방어 변인을 담당한다. 

상용게임에서는 방어구에 종류와 무기의 종류에 따라서 Damage의 감소여부를 적용하지만 본 졸업 작품에서는 단순화하여 

Damage를 퍼센트로 감소시켜 객체를 보호한다.


2.3 Damage
게임에서 객체의 공격력을 의미하며 상대방에게 어느 정도의 피해를 줄 수 있는지에 대한 주요 공격 변인이다.

이 파라미터는 상용게임에서 물리 공격력, 마법 공격력, 스킬 공격력 등으로 나눌 수 있지만 본 졸업 작품에서는 

단순화하여 물리 공격력, 즉 기본 공격만을 사용한다.

2.4 Speed
1초에 몇 번 공격을 할 수 있는가를 의미하는 수치이다. 이 수치와 Damage 파라미터를 이용하여

DPS(Damage per Second)를 의미하게 되는데, DPS 수치가 높을수록 적에게 신체적인 타격을 주어 

HP수치를 빠르게 감소시킴으로서 적을 쓰러트리며  객체의 생존율을 높일 수 있다.


3. 유전 알고리즘 적용
유전 알고리즘을 게임 내 몬스터의 절차적 생성에 반영하기 위해서는 몬스터의 속성들(HP, Armor, Damage, Speed)을 

이용하여 유전자 형태로 재정의해야 하며, 생성된 몬스터들에 대한 평가함수가 정의되어야 한다. 본 졸업 작품에서는 

플레이어의 능력에 해당하는 목표값(Rating)에 맞는 몬스터들을 생성하기 위하여, (그림 2)과 같이 목표값 설정, 유전자 생성, 

평가 및 선택, 교배, 변이와 같은 5단계의 프로세스를 통해 하나의 세대를 생성하며, 특정한 난이도의 몬스터들이 생성될 때까지 진화시킨다. 

본 연구에서는 (표 1)에 나와 있는 몬스터들을 유전자로 정의하고, 1개 염색체는 10개 유전자들로 구성하였다.

(그림 2) 유전 알고리즘의 흐름도

         
3.1 목표 값 설정
본 졸업 작품에서는 논문을 기반으로 각 몬스터의 속성은 유전자로 생성되며, 몬스터의 종류는 유전자의 종류로 결정된다. 

던전 내의 여러 몬스터들의 유전자가 모여 염색체를 이루고, 몬스터의 개수와 몬스터의 종류를 변화시키며 플레이어의 능력에 맞는

몬스터들이 생성되도록 목표 값을 설정한다. 목표 값은 HP, Armor, Damage, Speed를 이용하여 다음과 같이 계산된다.

Rating = ( HP + HP × Armor / 100 ) / Damage × Speed

3.2 유전자 생성
유전자 생성 작업은 사전에 설정한 몬스터 데이터를 랜덤으로 초기화시켜 염색체를 생성한다.

3.3 평가 및 선택
유전 알고리즘을 통해 생성되는 몬스터들은 던전의 적합도를 측정하는 함수에 의해 평가된다. 본 졸업 작품에서는 논문을 기반으로,

몬스터의 적합도를 평가하기 위하여 각각의 몬스터와 플레이어의 전투를 시뮬레이션 하여 플레이어에 남은 체력을 염색체 선택의 적합도 기준으로 삼았다.

이를 기준으로 적합도 순위 상위 50%의 개체가 선택되도록 한다.

3.4 교배
교배는 2개의 염색체를 부분적으로 서로 바꿈으로서 다음 세대의 개체를 생성하는 단계이다. 이 때 부모의 형질이 자손에게 적절히 유전되도록, 

(그림 3)과 같이 균일 교배방식을 선택한다. 선택을 통한 평가 함수 결과 값에 따라서 더 높은 확률로 교배가 일어나도록 하며, 이는 염색체의

적합도가 높은 염색체의 유전자를 다음 세대에 더 많이 선택되도록 하기 위함이다.

3.5 변이
변이는 주어진 해의 유전자 안에 있는 염색체가 임의로 변경되어 다른 해로 변형되는 랜덤 탐색의 일종이다. 교배가 부모 해들을 이용해서 

자식 해를 생성하는 바면, (그림 3)과 같이 변이는 임의의 새로운 해가 탄생하는 것과 같다. 이러한 변이 연산을 수행하면 전체 세대가 

모두 지역 최적해만 선택하는 것을 방지한다.
